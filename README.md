# pipermail

  node.js utilities for reading pipermail archives such as es-discuss

## Basic Usage

```javascript
var pipermail = require('pipermail');

//both progress and cache are disabled by default
//`pipermail` returns a stream of JSON objects.
//This can't be directly written to a file
var parsed = pipermail('https://mail.mozilla.org/pipermail/es-discuss/', {progress: true, cache: true});

//convert the stream of json objects into a stream of JSON text seperated by new lines.
var stringified = parsed.pipe(pipermail.stringify());

//pipe to a file
stringified.pipe(require('fs').createWriteStream('res.txt'));

//compress to a file
stringified.pipe(require('zlib').createGzip())
  .pipe(require('fs').createWriteStream('res.txt.gz'));
```

The resulting `res.txt` would look something like:

```javascript
{"header":{"from":{"email":"baz@mozilla.com","name":"Brendan Eich"},"date":"Sat, 3 Jun 2006 12:35:18 -0700","subject":"Welcome to the ECMAScript Edition 4 discussion list","messageID":"<3DE9B329-2A19-4B34-8779-B5BBCDA2684D@mozilla.com>"},"body":"Thanks to Graydon Hoare for setting it up.\n\n/be"}
{"header":{"from":{"email":"bar@olav.dk","name":"Olav Junker Kj√¶r"},"date":"Tue, 06 Jun 2006 15:40:48 +0200","subject":"ES4 translator","messageID":"<WorldClient-F200606061540.AA40480037@jirty.dk>"},"body":"Hello,\nI'm very pleased to s the new public specs for ES4"}
{"header":{"from":{"email":"foo@gmail.com","name":"Robert Sayre"},"date":"Wed, 7 Jun 2006 11:43:37 -0400","subject":"date literals","messageID":"<68fba5c50606070843p69276e64h4ac50a31649ce804@mail.gmail.com>"},"body":"I think the date literal should allow a trailing 'Z' to substitute for\n'+00:00'.\n\nRobert Sayre"}
```

I've shortened the bodies and renamed the e-mails but other than that it's the first few lines generated by the above code.

You should also note that the file would end with a blank line.

If you are piping with a command line app, you must set `progress` to false`.  If you have unlimited bandwidth but tightly constrained file space you may want to set `cache` to false.

## License

MIT